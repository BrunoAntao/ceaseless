<!DOCTYPE html>
<html>

<head>
    <title>Broadcaster</title>
    <meta charset="UTF-8" />
</head>

<body>

    <script type="module">

        import { Scene, GraphicObject } from '/client/js/modules/scene.js';
        import { AssetLoader, Sprite } from '/client/js/modules/AssetLoader.js';
        import { Vec2 } from '/client/js/modules/Vec2.js';

        document.addEventListener('DOMContentLoaded', async (event) => {

            let scene = new Scene({

                backgroundColor: "rgba(33, 33, 33, 1)"

            });

            const loader = scene.useModule(new AssetLoader());

            loader.loadSprite('player', '/client/assets/player.png', 16, 16);

            await loader.loaded();

            let sp = new Sprite(scene, 'player', new Vec2(0, 0));

            let direction = { x: 1, y: 1 };

            scene.update = () => {

                if (sp.position.x > scene.canvas.width - sp.width) {

                    direction.x = -1;

                }

                if (sp.position.y > scene.canvas.height - sp.height) {

                    direction.y = -1;

                }

                if (sp.position.x < 0) {

                    direction.x = 1;

                }

                if (sp.position.y < 0) {

                    direction.y = 1;

                }

                sp.position.x += direction.x;
                sp.position.y += direction.y;

            }

        });

    </script>

</body>

</html>